#!/bin/bash
set -e -o pipefail

fields=()
for file in user pass; do
    if [[ -e $file ]]; then
        field=$(cat "$file")
    else
        continue
    fi

    [[ $field != *[$'\t\n']* ]]
    fields+=( "$field" )
done
[[ ${#fields[@]} -gt 0 ]]

for i in ${!fields[@]}; do
    [[ $i == 0 ]] || split-browser-cmd helper xdotool key Tab
    ${fields[i]:+split-browser-cmd helper xdotool type "${fields[i]}"}
done

split-browser-cmd helper xdotool key Return
